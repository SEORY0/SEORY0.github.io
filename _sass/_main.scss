@charset "utf-8";

/* 1. Fonts: JetBrains Mono (영문/코드) + Pretendard (한글/본문) */
@import url("https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css");
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap');

/* 2. Variables */
:root {
  --background-color-base: #ffffff;
  --background-color-interactive: #f0f0f0;
  --background-color-interactive-subtle: #f8f9fa;
  --color-base: #202122;
  --color-subtle: #54595d;
  --color-progressive: #3366cc;
  --color-visited: #5a3696;
  --border-color-base: #c8ccd1;
  --border-color-subtle: #e1e1e1;
  
  /* [폰트] 영문은 JetBrains Mono, 한글은 Pretendard 적용 */
  --font-family-base: 'JetBrains Mono', 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, 'Helvetica Neue', 'Segoe UI', 'Apple SD Gothic Neo', 'Noto Sans KR', 'Malgun Gothic', sans-serif;
  --font-family-serif: 'Linux Biolinum', 'Georgia', 'Pretendard', serif;
  
  --sidebar-width: 16em;
  
  /* Box Colors */
  --box-bg: #ffffff;
  --box-border: #d0d7de;
  --box-header-bg: #f6f8fa;
  --code-bg: #f4f4f4;

  /* === 간격 스케일 (8px 기반) === */
  --space-xs: 4px;
  --space-sm: 8px;
  --space-md: 16px;
  --space-lg: 24px;
  --space-xl: 32px;
  --space-2xl: 48px;

  /* === Border Radius 스케일 === */
  --radius-sm: 4px;   /* 인라인 코드, 태그 */
  --radius-md: 6px;   /* 카드, 박스 */
  --radius-lg: 12px;  /* 큰 카드 */
  --radius-xl: 24px;  /* 히어로 섹션 */
  --radius-round: 50%; /* 원형 버튼 */

  /* === Shadow 스케일 === */
  --shadow-sm: 0 1px 3px rgba(0,0,0,0.1);
  --shadow-md: 0 4px 12px rgba(0,0,0,0.15);
  --shadow-lg: 0 6px 16px rgba(0,0,0,0.2);
}

/* Dark Mode Variables */
.skin-theme-clientpref-night {
  --background-color-base: #0d1117;
  --background-color-interactive: #21262d;
  --background-color-interactive-subtle: #161b22;
  --color-base: #c9d1d9;
  --color-subtle: #8b949e;
  --color-progressive: #58a6ff;
  --color-visited: #bc8cff;
  --border-color-base: #30363d;
  --border-color-subtle: #21262d;
  
  --box-bg: #0d1117;
  --box-border: #30363d;
  --box-header-bg: #161b22;
  --code-bg: #161b22;
}

/* 3. Reset & Base */
* { box-sizing: border-box; }
body {
  margin: 0;
  background-color: var(--background-color-base);
  color: var(--color-base);
  font-family: var(--font-family-base); /* 폰트 적용 */
  font-size: 0.9rem;
  line-height: 1.6;
  word-break: keep-all; /* 한글 줄바꿈 최적화 */
}

a { text-decoration: none; color: var(--color-progressive); }
a:visited { color: var(--color-visited); }
a:hover { text-decoration: underline; }

ul { list-style: none; padding: 0; margin: 0; }

/* 4. Layout Grid */
.mw-page-container {
  display: flex; justify-content: center;
  background-color: var(--background-color-base);
}

.mw-page-container-inner {
  display: grid;
  grid-template-columns: var(--sidebar-width) minmax(0, 1fr) 12rem;
  column-gap: 36px;
  max-width: 1400px; width: 100%; padding: 24px;
}

/* 5. Header */
.vector-header-container {
  position: sticky; top: 0; z-index: 4;
  background-color: var(--background-color-base);
  border-bottom: none; height: 4.5rem;
  display: flex; justify-content: center;
  box-shadow: 0 1px 0 var(--border-color-subtle);
}

.vector-header {
  display: flex; justify-content: space-between; align-items: center;
  width: 100%; max-width: 1400px; padding: 0 24px;
  .vector-header-start, .vector-header-end { display: flex; align-items: center; gap: 10px; }
}

.mw-logo {
  display: flex; align-items: center; gap: 10px; text-decoration: none;
  .mw-logo-icon { width: 40px; height: 40px; background: url('/assets/images/logo.png') no-repeat center/contain; }
  .mw-logo-wordmark { font-size: 1.6em; font-weight: 700; color: var(--color-base); }
  .mw-logo-tagline { font-size: 0.85em; color: var(--color-subtle); display: block; margin-top: -2px; }
}
.skin-theme-clientpref-night .mw-logo-icon { filter: invert(1); }

/* --- Search Box & Results Styling --- */

/* --- Search Box & Interaction --- */
.vector-search-box {
  /* [기능] 검색 결과창(absolute)의 기준점이 되도록 설정 */
  position: relative; 
  display: flex; 
  align-items: center;
  
  form { 
      display: flex; 
      width: 100%; /* 폼이 영역을 꽉 채우게 */
  }

  /* --- [User Design] Input Style --- */
  input { 
    border: 1px solid var(--border-color-base); 
    border-radius: 4px 0 0 4px;
    padding: 8px 12px; 
    font-size: 14px; 
    
    /* 너비 설정: flex로 부모에 맞추거나 고정폭 사용 */
    width: 250px; 
    
    font-family: var(--font-family-base);
    background-color: var(--background-color-base); 
    color: var(--color-base);
    outline: none;
    transition: border-color 0.2s;

    &:focus {
        border-color: var(--color-progressive); /* 포커스 시 파란 테두리 */
        /* 포커스 시 z-index를 높여서 버튼 경계선 위로 올라오게 함 */
        position: relative; 
        z-index: 2;
    }
  }

  /* --- [User Design] Button Style --- */
  button {
    background-color: var(--background-color-interactive);
    border: 1px solid var(--border-color-base); 
    border-left: none; /* input과 겹치는 선 제거 */
    padding: 8px 16px; 
    cursor: pointer; 
    border-radius: 0 4px 4px 0;
    color: var(--color-base); 
    font-size: 14px; 
    font-family: var(--font-family-base);
    font-weight: 600;
    transition: all 0.2s;

    &:hover {
        background-color: var(--border-color-subtle);
        color: var(--color-progressive);
    }

    &:active {
        background-color: var(--border-color-base);
        transform: translateY(1px);
    }
  }
}

/* --- Search Results Dropdown --- */
.search-results-container {
    display: none; /* 기본적으로 숨김 */
    
    /* [기능] 부모(.vector-search-box) 기준으로 위치 고정 */
    position: absolute;
    top: 100%;      /* 검색창 바로 아래 */
    left: 0;        /* 왼쪽 라인 맞춤 */
    
    /* [기능] 너비를 검색창 전체(input+button)와 동일하게 맞춤 */
    /* 만약 300px 고정을 원하시면 width: 300px; 로 변경하세요 */
    width: 100%;    
    
    max-height: 400px;
    overflow-y: auto;
    
    /* [User Design] Dropdown Style */
    background-color: var(--background-color-base);
    border: 1px solid var(--border-color-base);
    border-radius: 0 0 4px 4px; /* 위쪽은 직각, 아래쪽만 둥글게 */
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    z-index: 1000;
    margin-top: 4px; /* 검색창과 살짝 간격 */
}

/* --- Result Items Style --- */
.search-result-item {
    border-bottom: 1px solid var(--border-color-subtle);
    
    &:last-child { border-bottom: none; }

    a {
        display: block;
        padding: 12px;
        text-decoration: none;
        color: var(--color-base);
        transition: background-color 0.2s;

        &:hover {
            background-color: var(--background-color-interactive);
        }
    }
}

.result-title {
    font-weight: bold;
    font-size: 14px;
    color: var(--color-progressive);
    margin-bottom: 4px;
}

.result-date {
    font-size: 11px;
    color: var(--color-subtle);
    margin-bottom: 4px;
}

.result-snippet {
    font-size: 12px;
    color: var(--color-base);
    line-height: 1.4;
    opacity: 0.8;
}

.search-no-result {
    padding: 15px;
    text-align: center;
    color: var(--color-subtle);
    font-size: 13px;
}

/* 6. Sidebar */
.vector-main-menu-container {
  /* [핵심 기능] 스크롤 따라오기 (Sticky) */
  position: sticky;
  top: 5.5rem;   /* 상단 헤더(4.5rem) + 여유공간(1rem) 만큼 띄우고 고정 */
  
  /* [UX 개선] 메뉴가 화면보다 길 경우를 대비한 설정 */
  max-height: calc(100vh - 6rem); /* 화면 꽉 차면 잘리지 않게 높이 제한 */
  overflow-y: auto;               /* 내용이 넘치면 사이드바 내부에서 스크롤 됨 */
  z-index: 3;                     /* 본문보다 위에 보이도록 설정 */
  
  /* 기존 스타일 유지 */
  .vector-menu-heading { 
    font-weight: 700; color: var(--color-subtle); 
    margin: 24px 0 10px; font-size: 0.95em; 
    border-bottom: 1px solid var(--border-color-subtle); padding-bottom: 5px;
  }
  .mw-list-item { 
    margin-bottom: 6px; font-size: 1em; 
    a { 
      color: var(--color-base); padding: 4px 0; display: block; 
      &:hover { color: var(--color-progressive); } 
    }
    &.selected a { 
      font-weight: 700; color: var(--color-progressive); 
      border-left: 3px solid var(--color-progressive); 
      padding-left: 10px; margin-left: -13px; 
    }
  }

  /* (선택사항) 사이드바 내부 스크롤바 얇고 예쁘게 */
  &::-webkit-scrollbar { width: 4px; }
  &::-webkit-scrollbar-thumb { background-color: var(--border-color-subtle); border-radius: 4px; }
  &::-webkit-scrollbar-track { background: transparent; }
}

/* 7. Main Content */
.mw-body { min-width: 0; }

/* [수정됨] Tabs - Toolbar 숨김 처리 */
.vector-page-toolbar {
  display: none;
}

/* Title */
.firstHeading {
  font-size: 2em; font-weight: 700; border-bottom: 1px solid var(--border-color-base);
  margin-bottom: 0.5em; padding-bottom: 0.2em;
}
#siteSub { font-size: 0.9em; color: var(--color-subtle); margin-bottom: 2em; }

/* 8. Modernized Boxes */
.main-page-top-header {
  border: 1px solid var(--border-color-base);
  border-left: 5px solid var(--color-progressive);
  background-color: var(--box-header-bg);
  padding: 24px; margin-bottom: 30px; border-radius: 6px;
  display: flex; justify-content: space-between; align-items: flex-start;
  
  .welcome-inner h2 { margin: 0 0 10px; font-size: 1.5em; }
  .welcome-inner code { background: var(--code-bg); padding: 2px 6px; border-radius: 4px; font-size: 0.9em; font-family: var(--font-family-base); }
  .browse-links span { margin-left: 15px; font-weight: 700; }
}

.main-page-body-grid {
  display: grid; grid-template-columns: 1fr 1fr; gap: 30px;
}

/* Clean Box Style */
.clean-box {
  margin-bottom: 24px;
  h3 { 
    border-bottom: 2px solid var(--border-color-subtle); 
    font-size: 1.2em; margin-bottom: 10px; padding-bottom: 5px; 
  }
  .wiki-list li { margin-bottom: 5px; list-style: square; margin-left: 20px; }
}

/* Featured & Recent Cards */
.featured-card, .recent-card {
  border: 1px solid var(--box-border); border-radius: 6px; overflow: hidden; margin-bottom: 24px;
}

.card-header {
  background-color: var(--box-header-bg); padding: 10px 15px;
  font-weight: 700; border-bottom: 1px solid var(--box-border);
  display: flex; justify-content: space-between; align-items: center;
}
.card-tag { 
  background: var(--color-progressive); color: #fff; 
  font-size: 0.75em; padding: 2px 6px; border-radius: 4px; 
}

.card-body { padding: 15px; }
.code-block {
  background-color: var(--code-bg); border: 1px solid var(--border-color-subtle);
  padding: 12px; margin-top: 10px; border-radius: 4px; font-size: 0.9em; color: var(--color-subtle);
  font-family: var(--font-family-base);
}

.recent-list li {
  padding: 10px 15px; border-bottom: 1px solid var(--border-color-subtle);
  display: flex; gap: 10px; align-items: center; font-size: 0.9em;
  &:last-child { border-bottom: none; }
  .date { color: var(--color-subtle); font-size: 0.85em; }
  .diff { color: green; font-size: 0.85em; }
}

/* 9. Appearance */
.vector-appearance {
  .vector-pinnable-header-label { font-weight: 700; margin-bottom: 15px; font-size: 0.95em; }
  
  .theme-toggle-wrapper { display: flex; align-items: center; gap: 12px; font-size: 0.9em; font-weight: 500; color: var(--color-base); }
  .toggle-switch { position: relative; display: inline-block; width: 52px; height: 26px; input { opacity: 0; width: 0; height: 0; } .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: var(--border-color-base); transition: .4s; border-radius: 34px; border: 1px solid var(--border-color-base); } .slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.2); } }
  input:checked + .slider { background-color: var(--color-progressive); border-color: var(--color-progressive); }
  input:checked + .slider:before { transform: translateX(26px); }
}

/* --- Post Detail Styles --- */
.post-content {
  font-size: 1rem; line-height: 1.7; margin-top: 20px; font-family: var(--font-family-base);
  p { margin-bottom: 1.2em; }
  h2 { font-size: 1.5em; border-bottom: 1px solid var(--border-color-base); margin-top: 1.5em; margin-bottom: 0.8em; padding-bottom: 0.3em; font-family: var(--font-family-serif); }
  h3 { font-size: 1.2em; margin-top: 1.2em; margin-bottom: 0.5em; font-weight: bold; }
  ul, ol { margin-left: 2em; margin-bottom: 1em; } ul { list-style: disc; } ol { list-style: decimal; } li { margin-bottom: 0.3em; }
  blockquote { border-left: 4px solid var(--color-progressive); background-color: var(--background-color-interactive-subtle); padding: 10px 15px; margin: 1.5em 0; color: var(--color-subtle); font-style: italic; }
  pre { background-color: #2b2b2b; color: #a9b7c6; padding: 15px; border-radius: 4px; overflow-x: auto; font-family: var(--font-family-base); font-size: 0.9em; border: 1px solid var(--border-color-base); margin-bottom: 1.5em; }
  code { font-family: var(--font-family-base); background-color: var(--code-bg); padding: 2px 4px; border-radius: 3px; font-size: 0.9em; }
  img { max-width: 100%; height: auto; border: 1px solid var(--border-color-subtle); border-radius: 2px; margin: 1em 0; }
}

/* Infobox & Table Styles */
.infobox { float: right; clear: right; width: 300px; margin: 0 0 1em 1em; border: 1px solid var(--border-color-base); background-color: var(--box-bg); border-spacing: 0; padding: 0.2em; font-size: 0.9em; line-height: 1.5em; td, th { vertical-align: top; padding: 0.4em 0.6em; } .infobox-header { background-color: var(--box-header-bg); color: var(--color-base); text-align: center; font-size: 1.25em; font-weight: 700; padding: 0.5em; } .infobox-image { text-align: center; padding: 10px 0; } .infobox-image img { border-radius: 4px; border: 1px solid var(--border-color-subtle); } th[scope="row"] { text-align: left; font-weight: 700; width: 90px; } }
.tag-label { display: inline-block; background-color: var(--background-color-interactive); padding: 2px 6px; border-radius: 3px; font-size: 0.85em; margin-right: 4px; margin-bottom: 4px; border: 1px solid var(--border-color-subtle); }
.wikitable { background-color: var(--box-bg); border: 1px solid var(--border-color-base); border-collapse: collapse; margin: 1em 0; width: 100%; max-width: 100%; th, td { border: 1px solid var(--border-color-base); padding: 0.5em; } th { background-color: var(--box-header-bg); text-align: left; font-weight: 700; } }
.toc { display: table; padding: 10px 20px; margin: 20px 0; background-color: var(--background-color-interactive-subtle); border: 1px solid var(--border-color-base); border-radius: 2px; .toctitle { text-align: center; font-weight: 700; margin-bottom: 5px; } ul { list-style: none; padding: 0; margin: 0; } li { margin-bottom: 4px; font-size: 0.95em; } .tocnumber { color: var(--color-subtle); margin-right: 5px; } }
#catlinks { border: 1px solid var(--border-color-base); background-color: var(--box-bg); padding: 10px; margin-top: 40px; clear: both; .mw-normal-catlinks { display: flex; align-items: center; ul { display: inline; list-style: none; margin: 0; padding: 0; li { display: inline-block; border-left: 1px solid var(--color-subtle); padding: 0 0.5em; margin-left: 0.5em; &:first-child { border-left: none; margin-left: 0; } } } } }

/* Gallery Styles */
.gallery-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; margin-top: 20px; }
.gallery-item { background-color: var(--box-bg); border: 1px solid var(--border-color-base); padding: 10px; border-radius: 2px; transition: box-shadow 0.3s, transform 0.3s; &:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.1); transform: translateY(-3px); border-color: var(--color-progressive); } .thumb-link { display: block; overflow: hidden; background-color: var(--background-color-interactive-subtle); border: 1px solid var(--border-color-subtle); margin-bottom: 10px; } .thumb { height: 180px; display: flex; justify-content: center; align-items: center; overflow: hidden; img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s; } } &:hover .thumb img { transform: scale(1.08); } .gallery-info { text-align: center; .caption { font-size: 0.95em; margin-bottom: 8px; color: var(--color-base); b { display: block; margin-bottom: 4px; font-size: 1.05em; } p { margin: 0; font-size: 0.9em; color: var(--color-subtle); line-height: 1.4; } } .meta { font-size: 0.8em; color: var(--color-subtle); border-top: 1px solid var(--border-color-subtle); padding-top: 6px; display: flex; justify-content: space-between; } } }

/* Book List Styles */
.book-list { display: flex; flex-direction: column; gap: 20px; margin-top: 15px; }
.book-card { display: flex; gap: 20px; padding: 15px; border: 1px solid var(--border-color-base); background-color: var(--box-bg); border-radius: 4px; transition: transform 0.2s; &:hover { border-color: var(--color-progressive); transform: translateX(5px); } &.reading { border-left: 4px solid var(--color-progressive); background-color: var(--box-header-bg); } .book-cover { flex-shrink: 0; width: 100px; img { width: 100%; height: auto; border-radius: 2px; box-shadow: 2px 2px 5px rgba(0,0,0,0.1); border: 1px solid var(--border-color-subtle); } } .book-info { flex-grow: 1; display: flex; flex-direction: column; justify-content: center; h3 { margin: 0 0 5px 0; font-size: 1.2em; border: none; padding: 0; } .author { font-size: 0.9em; color: var(--color-subtle); margin-bottom: 10px; font-style: italic; } .quote-box { background-color: var(--code-bg); border: 1px solid var(--border-color-subtle); padding: 10px; border-radius: 4px; font-size: 0.9em; margin-bottom: 10px; .prompt { display: block; font-size: 0.8em; color: var(--color-subtle); margin-bottom: 3px; font-weight: 700; } p { margin: 0; font-style: italic; color: var(--color-base); } } .simple-summary { font-size: 0.95em; margin-bottom: 8px; } .meta-date { font-size: 0.8em; color: var(--color-subtle); margin-top: auto; } } }

/* Footer */
.mw-footer {
  margin-top: 60px; padding: 30px 0;
  border-top: 1px solid var(--border-color-base);
  font-size: 0.85em; color: var(--color-subtle);
}

/* --- Main Hero Banner (Fixed Version) --- */
.main-hero-banner {
  width: 100%;
  height: 350px;
  margin-bottom: 30px;
  border-radius: 6px;
  border: 1px solid var(--border-color-subtle);
  
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;

  /* [1] 기본 상태 (라이트 모드) */
  background-color: #ffffff; 
  border-color: #e0e0e0;
  transition: background-color 0.3s ease;

  img.ascii-img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: contain;
    
    /* 라이트모드: 검은 배경 이미지를 하얗게 반전 */
    filter: invert(100%) hue-rotate(180deg);
    
    transition: filter 0.3s ease;
    image-rendering: -webkit-optimize-contrast;
    transform: translateZ(0);
  }

  /* [2] 다크 모드 감지 (강력한 수정) */
  /* html 태그 OR body 태그 어디에 클래스가 붙어도 작동하도록 모두 명시 */
  html.skin-theme-clientpref-night &,
  body.skin-theme-clientpref-night &,
  html.dark &,
  body.dark & {
    
    background-color: #000000 !important;
    border-color: var(--border-color-subtle) !important;

    img.ascii-img {
      /* 다크모드: 반전 끄기 (원본 검은 배경 이미지 노출) */
      filter: none !important;
    }
  }
}

/* ========================================================================== */
/* [Mobile Responsive] Header Redesign & Slide-Down Menu                    */
/* ========================================================================== */

/* 1. 햄버거 버튼 기본 스타일 (PC에서는 숨김) */
.mobile-menu-btn {
  display: none; /* 기본값: 숨김 */
  flex-direction: column;
  justify-content: space-around;
  width: 28px;  /* 버튼 크기 약간 축소 */
  height: 28px;
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 0;
  margin-left: 0px;
  z-index: 2000; 

  .bar {
    width: 100%;
    height: 2.5px; /* 두께 조정 */
    background-color: var(--color-base);
    border-radius: 2px;
    transition: all 0.3s ease;
  }

  /* 활성화(X자) 애니메이션 */
  &.active {
    .bar:nth-child(1) { transform: rotate(45deg) translate(5px, 5px); }
    .bar:nth-child(2) { opacity: 0; }
    .bar:nth-child(3) { transform: rotate(-45deg) translate(5px, -5px); }
  }
}

/* 2. 오버레이 (뒷배경 어둡게) */
.mobile-overlay {
  display: none;
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  z-index: 1005; 
  opacity: 0;
  transition: opacity 0.3s ease;
  &.visible { display: block; opacity: 1; }
}


/* -------------------------------------------------------------------------- */
/* [Mobile Breakpoint] 1000px 이하에서 디자인 변경                          */
/* -------------------------------------------------------------------------- */
@media (max-width: 1000px) {

  /* 1. 레이아웃 초기화 */
  .mw-page-container-inner {
    display: block; 
    padding: 0 15px;
    max-width: 100vw;      /* 화면 너비 초과 방지 */
    overflow-x: hidden;
  }
  
  .vector-column-end { display: none; }
  .main-page-body-grid { grid-template-columns: 1fr; }


  /* ---------------- [Header Alignment Fix: Wrapper Support] ---------------- */
  
  /* 헤더 컨테이너 높이 */
  .vector-header-container {
    height: 3.5rem; 
    padding: 0 12px;
  }
  
  /* [부모 컨테이너] Flex 설정 */
  .vector-header {
    display: flex !important;
    align-items: center !important;
    width: 100% !important;
    padding: 0;
    justify-content: flex-start !important; 
  }

  /* ★ 핵심 수정: 로고 뿐만 아니라 로고를 감싸는 부모(.vector-header-start)도 함께 타겟팅 ★ */
  .vector-header-start,
  .mw-logo {
    display: flex;
    align-items: center;
    gap: 8px;
    
    /* "내 오른쪽의 모든 빈 공간을 여백으로 써라" -> 나머지를 오른쪽 끝으로 밀어버림 */
    margin-right: auto !important; 
    
    flex-shrink: 0; 

    /* 로고 이미지 스타일 */
    .mw-logo-icon { width: 32px; height: 32px; }
    .mw-logo-wordmark { font-size: 1.2em; white-space: nowrap; }
    .mw-logo-tagline { display: none; } 
  }

  /* 혹시 모를 Search/Button을 감싸는 오른쪽 그룹이 있다면 flex 적용 */
  .vector-header-end {
    display: flex !important;
    align-items: center;
    gap: 5px;
  }

  /* [검색창] */
  .vector-search-box {
    /* 로고가 이미 밀어줬으므로 auto 제거 */
    margin-left: 0 !important; 
    margin-right: 0 !important; 
    
    display: flex;
    align-items: center;

    form { display: flex; align-items: center; }

    input {
      width: 130px !important; 
      padding: 6px 10px;
      font-size: 13px;
      height: 32px;
    }
    
    button {
      padding: 0 10px;
      font-size: 13px;
      height: 32px;
      display: flex; align-items: center; justify-content: center;
    }
  }

  /* [햄버거 버튼] */
  .mobile-menu-btn {
    display: flex !important;
    margin-left: 8px; /* 검색창과 간격 */
  }

   /* 4. [중요] 인포박스(Infobox) 반응형 강제 적용 */
  /* HTML에 인라인 스타일(width: 22em)이 있어서 !important로 덮어씌워야 함 */
  table.infobox {
    width: 100% !important; /* 강제 100% */
    float: none !important; /* 오른쪽 둥둥 떠있는 것 해제 */
    margin: 0 0 20px 0 !important;
    clear: both;
    
    /* 내부 폰트 및 패딩 조정 */
    th, td {
      padding: 8px 10px;
      font-size: 14px;
    }
    
    /* 모바일에서는 제목(th)과 내용(td)을 위아래로 배치하고 싶다면 */
    /* (선택사항: 표 모양 유지를 원하면 이 부분은 생략 가능) */
    /*
    display: block;
    tbody, tr, th, td { display: block; width: 100%; }
    th { background-color: var(--box-header-bg); }
    */
  }

    /* 6. 타이포그래피 및 본문 가독성 */
  .firstHeading {
    font-size: 1.8em; /* 제목 크기 조정 */
    margin-bottom: 0.5em;
    word-wrap: break-word; /* 긴 단어 줄바꿈 */
  }

  #siteSub {
    font-size: 0.85em;
    margin-bottom: 1.5em;
  }

  .post-content {
    font-size: 16px;   /* 본문 글자 크기 */
    line-height: 1.7;  /* 줄간격 넉넉하게 */
    
    /* 긴 단어 강제 줄바꿈 */
    word-break: break-word; 
    overflow-wrap: break-word;
    
    /* 이미지 반응형 */
    img {
      max-width: 100% !important;
      height: auto !important;
      margin: 1em 0;
    }
  }


  /* 7. 코드 블럭 모바일 최적화 */
  .code-block-container {
    /* 화면 너비보다 넓은 코드 박스는 내부 스크롤 처리 */
    max-width: 100%;
    margin: 20px 0;
    
    .code-wrapper {
      overflow-x: auto; /* 가로 스크롤 활성화 */
      -webkit-overflow-scrolling: touch; /* 부드러운 스크롤 */
    }
    
    /* 모바일에서 폰트 살짝 줄임 */
    pre {
      font-size: 13px; 
      padding: 12px;
    }
  }

  
  /* 8. 카테고리 박스 (하단) */
  #catlinks {
    margin-top: 30px;
    padding: 15px;
    
    .mw-normal-catlinks ul li {
      display: inline-block;
      margin-bottom: 5px;
      border-left: none; /* 모바일엔 세로선 제거 */
      margin-left: 0;
      margin-right: 10px;
    }
  }

  /* ---------------- [Slide-Down Menu Animation] ---------------- */
  .vector-column-start {
    display: block !important;
    position: fixed;
    top: 3.5rem;
    left: 0;
    width: 100%;
    height: auto;
    max-height: 0;
    
    background-color: var(--background-color-base);
    border-bottom: 1px solid var(--border-color-base);
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    
    overflow: hidden;
    transition: max-height 0.4s cubic-bezier(0.25, 1, 0.5, 1);
    z-index: 1010;
    padding: 0;

    .vector-main-menu-container {
      position: static;
      max-height: 60vh;
      overflow-y: auto;
      padding: 20px;
    }

    &.menu-open {
      max-height: 80vh;
      border-bottom: 1px solid var(--border-color-base);
    }
  }

  .book-card {
    flex-direction: column;
    text-align: center;
    .book-cover { margin-bottom: 15px; }
  }

  /* 모바일 테마 토글 표시 */
  .mobile-theme-toggle {
    display: flex !important;
  }
}
/* ========================================================================== */
/* [Mobile Floating Toggle] Bottom-Left Dark Mode Button                    */
/* ========================================================================== */

.mobile-theme-toggle {
  /* [기본 배치] PC에서는 숨김 */
  display: none;
  
  /* 위치 고정: 왼쪽 아래 */
  position: fixed;
  bottom: 25px; 
  left: 25px;   
  z-index: 2000; /* 다른 요소보다 위에 오도록 */
  
  /* 크기 및 모양 (원형) */
  width: 48px;
  height: 48px;
  border-radius: 50%; 
  
  /* 디자인: 카드 스타일 */
  background-color: var(--box-bg);
  border: 1px solid var(--border-color-base);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); /* 떠있는 그림자 */
  color: var(--color-base);
  
  cursor: pointer;
  padding: 0;
  
  /* 아이콘 중앙 정렬을 위한 Flex */
  align-items: center;
  justify-content: center;
  
  transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), background-color 0.3s;

  /* 클릭 시 살짝 눌리는 효과 */
  &:active {
    transform: scale(0.92);
  }
  
  /* 내부 아이콘 공통 스타일 */
  svg {
    position: absolute; /* 아이콘 두 개를 정확히 겹침 */
    transition: opacity 0.3s ease, transform 0.3s ease;
  }
  
  /* [Light Mode Default] 달 보임 / 해 숨김 */
  .icon-moon { opacity: 1; transform: rotate(0deg) scale(1); }
  .icon-sun  { opacity: 0; transform: rotate(90deg) scale(0.5); }
}


/* -------------------------------------------------------------------------- */
/* [State Handling] 다크모드일 때 스타일 변경                                  */
/* -------------------------------------------------------------------------- */
html.skin-theme-clientpref-night .mobile-theme-toggle,
body.skin-theme-clientpref-night .mobile-theme-toggle,
html.dark .mobile-theme-toggle,
body.dark .mobile-theme-toggle {
  
  background-color: #2d333b; /* 버튼 배경 어둡게 */
  border-color: #444c56;
  color: #e6edf3;

  /* [Dark Mode Active] 달 숨김 / 해 보임 */
  .icon-moon { opacity: 0; transform: rotate(-90deg) scale(0.5); }
  .icon-sun  { opacity: 1; transform: rotate(0deg) scale(1); }
}


/* -------------------------------------------------------------------------- */
/* ========================================================================== */
/* [Adaptive Theme] Clean Code Block Redesign                                 */
/* ========================================================================== */

/* 1. 테마별 변수 설정 (라이트 모드 기본) */
:root {
  /* 라이트 모드 색상 (GitHub/VS Code Light 스타일) */
  --code-block-bg: #ffffff;       /* 밝은 배경 */
  --code-header-bg: #f6f8fa;      /* 밝은 헤더 */
  --code-text-color: #24292e;     /* 어두운 텍스트 */
  --code-line-num-color: #6e7681; /* 밝은 회색 줄번호 */
  --code-border-color: #d0d7de;   /* 밝은 테두리 */
  --code-copy-btn-hover: rgba(0, 0, 0, 0.08); /* 복사 버튼 호버 */
  
  /* 인라인 코드 스타일 */
  --inline-code-bg: rgba(175, 184, 193, 0.2);
  --inline-code-color: var(--color-base);
}

/* 다크 모드 변수 오버라이드 */
html.skin-theme-clientpref-night,
body.skin-theme-clientpref-night,
html.dark,
body.dark {
  /* 다크 모드 색상 (VS Code Dark 스타일) */
  --code-block-bg: #1e1e1e;       /* 어두운 배경 */
  --code-header-bg: #2d2d2d;      /* 어두운 헤더 */
  --code-text-color: #d4d4d4;     /* 밝은 텍스트 */
  --code-line-num-color: #858585; /* 어두운 회색 줄번호 */
  --code-border-color: #333333;   /* 어두운 테두리 */
  --code-copy-btn-hover: rgba(255, 255, 255, 0.1); /* 복사 버튼 호버 */

  --inline-code-bg: rgba(110, 118, 129, 0.4);
  --inline-code-color: #e6edf3;
}


/* ---------------- [Inline Code] ---------------- */
p > code, li > code, td > code, span > code {
  background-color: var(--inline-code-bg);
  color: var(--inline-code-color);
  padding: 0.2em 0.4em;
  border-radius: 4px;
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.85em;
  font-weight: 500;
  border: none; 
}


/* ---------------- [Code Block Container Structure] ---------------- */

/* 2. 메인 컨테이너 */
.code-block-container {
  margin: 24px 0;
  border-radius: 8px;
  overflow: hidden;
  background-color: var(--code-block-bg);
  border: 1px solid var(--code-border-color);
  /* 그림자는 다크모드에서만 살짝 줍니다 */
  box-shadow: none;
  font-family: 'JetBrains Mono', monospace;
  transition: background-color 0.3s, border-color 0.3s;
}

/* 3. 상단 바 (심플 디자인) */
.code-header {
  display: flex;
  align-items: center;
  /* 신호등이 없어졌으므로 양쪽 끝 정렬 */
  justify-content: space-between;
  padding: 8px 12px;
  background-color: var(--code-header-bg);
  border-bottom: 1px solid var(--code-border-color);
  transition: background-color 0.3s, border-color 0.3s;

  /* 언어 표시 라벨 (왼쪽 배치) */
  .language-label {
    font-size: 0.85em;
    color: var(--code-line-num-color);
    font-weight: 600;
  }
}

/* 4. 복사 버튼 */
.copy-btn {
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 6px;
  border-radius: 4px;
  color: var(--code-line-num-color);
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
  
  &:hover {
    background-color: var(--code-copy-btn-hover);
    color: var(--code-text-color);
  }

  svg { width: 16px; height: 16px; }
  
  /* 복사 완료 상태 */
  &.copied { color: var(--color-progressive); }
}


/* ---------------- [Code Body & Line Numbers] ---------------- */

/* 5. 코드 본문 영역 */
.code-body { display: flex; position: relative; }

/* 6. 줄 번호 영역 */
.line-numbers-wrapper {
  flex-shrink: 0;
  padding: 16px 12px;
  text-align: right;
  background-color: var(--code-header-bg); /* 헤더와 같은 색상 사용 */
  border-right: 1px solid var(--code-border-color);
  user-select: none;
  transition: background-color 0.3s, border-color 0.3s;

  .line-number {
    display: block;
    font-size: 13.5px;
    line-height: 1.6;
    color: var(--code-line-num-color);
    font-family: 'JetBrains Mono', monospace;
  }
}

/* 7. 실제 코드 영역 */
.code-wrapper {
  flex-grow: 1;
  overflow-x: auto;

  pre {
    margin: 0;
    padding: 16px;
    background: transparent;
    border: none;
    border-radius: 0;
    color: var(--code-text-color);
    font-size: 13.5px;
    line-height: 1.6;
    font-family: 'JetBrains Mono', monospace;
  }

  code {
    background: transparent;
    padding: 0;
    border: none;
    color: inherit;
    font-family: inherit;
  }
}

/* 8. 스크롤바 스타일링 */
.code-wrapper::-webkit-scrollbar { height: 6px; width: 6px; }
.code-wrapper::-webkit-scrollbar-thumb {
  background-color: var(--code-border-color);
  border-radius: 3px;
}
.code-wrapper::-webkit-scrollbar-track { background-color: transparent; }


/* ================================================================= */
/* [Syntax Highlighting Theme] Adaptive Light / Dark                 */
/* ================================================================= */

/* --- 기본: 라이트 모드 (VS Code Light 스타일) --- */
.c, .cm, .cp, .c1, .cs { color: #008000; } /* Comment (녹색) */
.k, .kc, .kd, .kp, .kr, .kt, .o, .ow { color: #0000ff; } /* Keyword (파랑) */
.nf, .fm { color: #795e26; } /* Function (갈색) */
.s, .sa, .sb, .sc, .dl, .sd, .s2, .se, .sh, .si, .sx, .sr, .s1, .ss { color: #a31515; } /* String (빨강) */
.m, .mb, .mf, .mh, .mi, .il, .mo { color: #098658; } /* Number */
.nc, .nt, .nn { color: #267f99; } /* Class/Type */
.nv, .vc, .vg, .vi, .na { color: #001080; } /* Variable */
.nt { color: #0000ff; } /* HTML Tag */
.na { color: #001080; } /* HTML Attribute */
.err { color: #d16969; } 

/* --- 다크 모드 오버라이드 (VS Code Dark 스타일) --- */
html.skin-theme-clientpref-night,
body.skin-theme-clientpref-night,
html.dark,
body.dark {
  .code-block-container { box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4); }

  /* Syntax Colors - Dark */
  .c, .cm, .cp, .c1, .cs { color: #6a9955; } 
  .k, .kc, .kd, .kp, .kr, .kt, .o, .ow { color: #569cd6; } 
  .nf, .fm { color: #dcdcaa; } 
  .s, .sa, .sb, .sc, .dl, .sd, .s2, .se, .sh, .si, .sx, .sr, .s1, .ss { color: #ce9178; } 
  .m, .mb, .mf, .mh, .mi, .il, .mo { color: #b5cea8; } 
  .nc, .nt, .nn { color: #4ec9b0; } 
  .nv, .vc, .vg, .vi, .na { color: #9cdcfe; } 
  .nt { color: #569cd6; } 
  .na { color: #9cdcfe; } 
  .err { color: #f44747; } 
}

/* ========================================================================== */
/* [Markdown Table Styling] Auto-apply to all tables in posts                 */
/* ========================================================================== */

/* 포스트 본문(.post-content) 안의 모든 테이블에 자동 적용 */
.post-content table {
  width: 100%;
  max-width: 100%;
  border-collapse: collapse;
  margin: 1.5em 0;
  font-size: 0.95em;
  line-height: 1.5;
  
  /* 테마 색상 적용 */
  background-color: var(--box-bg);
  border: 1px solid var(--border-color-base);
  border-radius: 4px; /* 모서리 살짝 둥글게 (border-collapse랑 충돌 시 무시됨) */
  overflow: hidden;   /* 둥근 모서리 유지 */

  /* 테이블 헤더 (제목 줄) */
  thead {
    background-color: var(--box-header-bg);
    border-bottom: 2px solid var(--border-color-base);
    
    th {
      font-weight: 700;
      color: var(--color-base);
      text-align: left;
      padding: 12px 15px;
      white-space: nowrap; /* 제목 줄바꿈 방지 */
    }
  }

  /* 테이블 본문 */
  tbody {
    td {
      padding: 10px 15px;
      border-bottom: 1px solid var(--border-color-subtle);
      color: var(--color-base);
      vertical-align: top;
    }

    /* 짝수 줄에 은은한 배경색 (가독성 UP) */
    tr:nth-child(even) {
      background-color: var(--background-color-interactive-subtle);
    }

    /* 마우스 올렸을 때 하이라이트 */
    tr:hover {
      background-color: var(--background-color-interactive);
    }
    
    /* 마지막 줄은 테두리 제거 */
    tr:last-child td {
      border-bottom: none;
    }
  }
}

/* ========================================================================== */
/* [Post Images] Dark Mode Auto-Inversion (Smart Invert)                      */
/* ========================================================================== */

/* 1. 기본 상태 (라이트 모드) */
.post-content img {
  /* 부드러운 전환 효과 */
  transition: filter 0.3s ease;
  
  /* 원본이 하얀 배경이므로, 라이트 모드에서는 그대로 보여줌 */
  filter: none;
}

/* 2. 다크 모드 상태 (반전 적용) */
html.skin-theme-clientpref-night .post-content img,
body.skin-theme-clientpref-night .post-content img,
html.dark .post-content img,
body.dark .post-content img {

  /* invert(100%): 흰색 -> 검은색으로 반전
     hue-rotate(180deg): 반전되면서 뒤집힌 색상(파랑->주황 등)을 다시 원상복구
     결과: 배경은 어두워지고, 글자나 그래프 색감은 비슷하게 유지됨
  */
  filter: invert(100%) hue-rotate(180deg);
}

/* ========================================================================== */
/* [Utility Classes] 인라인 스타일 제거를 위한 유틸리티 클래스                  */
/* ========================================================================== */

/* Photos 페이지 */
.section-divider {
  margin-top: var(--space-2xl);
}

.gallery-disclaimer {
  font-size: 0.9em;
  color: var(--color-subtle);
}

/* Projects 페이지 - 상태 표시 */
.status-active {
  color: #28a745;
  font-weight: 600;
}

.status-maintenance {
  color: #fd7e14;
  font-weight: 600;
}

.status-archived {
  color: #6c757d;
  font-weight: 600;
}

/* ========================================================================== */
/* [Accessibility] 포커스 상태 개선                                          */
/* ========================================================================== */

/* 모든 인터랙티브 요소에 명확한 포커스 표시 */
a:focus,
button:focus,
input:focus,
select:focus,
textarea:focus {
  outline: 2px solid var(--color-progressive);
  outline-offset: 2px;
}

/* 테마 토글 체크박스 포커스 */
.toggle-switch input:focus + .slider {
  box-shadow: 0 0 0 3px rgba(51, 102, 204, 0.25);
}

/* 모바일 메뉴 버튼 포커스 */
.mobile-menu-btn:focus {
  outline: 2px solid var(--color-progressive);
  outline-offset: 2px;
}

/* 검색 입력 포커스 */
#searchInput:focus {
  outline: 2px solid var(--color-progressive);
  outline-offset: 0;
  border-color: var(--color-progressive);
}

/* ===== AI Guide Series Styles ===== */
.guide-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin: 0.5rem 0 1rem;
}

.guide-tag {
  display: inline-block;
  background: var(--background-color-interactive-subtle);
  border: 1px solid var(--border-color-subtle);
  color: var(--color-subtle);
  font-size: 0.78rem;
  padding: 2px 8px;
  border-radius: var(--radius-sm);
}

.guide-link-placeholder {
  color: var(--color-subtle);
}

.guide-route {
  background: var(--background-color-interactive-subtle);
  border: 1px solid var(--border-color-subtle);
  border-radius: var(--radius-md);
  padding: 1rem 1.25rem;
  margin-bottom: 1rem;
}

.guide-route h3 {
  margin: 0 0 0.4rem;
  font-size: 0.95rem;
  border: none;
}

.guide-route p {
  margin: 0.4rem 0 0;
  font-size: 0.85rem;
  color: var(--color-subtle);
}

.guide-route-path {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.85rem;
  color: var(--color-progressive);
  font-weight: 500;
}
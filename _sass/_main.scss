@charset "utf-8";

/* 1. Fonts: JetBrains Mono (영문/코드) + Pretendard (한글/본문) */
@import url("https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css");
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap');

/* 2. Variables */
:root {
  --background-color-base: #ffffff;
  --background-color-interactive: #f0f0f0;
  --background-color-interactive-subtle: #f8f9fa;
  --color-base: #202122;
  --color-subtle: #54595d;
  --color-progressive: #3366cc;
  --color-visited: #5a3696;
  --border-color-base: #c8ccd1;
  --border-color-subtle: #e1e1e1;
  
  /* [폰트] 영문은 JetBrains Mono, 한글은 Pretendard 적용 */
  --font-family-base: 'JetBrains Mono', 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, 'Helvetica Neue', 'Segoe UI', 'Apple SD Gothic Neo', 'Noto Sans KR', 'Malgun Gothic', sans-serif;
  --font-family-serif: 'Linux Biolinum', 'Georgia', 'Pretendard', serif;
  
  --sidebar-width: 16em;
  
  /* Box Colors */
  --box-bg: #ffffff;
  --box-border: #d0d7de;
  --box-header-bg: #f6f8fa;
  --code-bg: #f4f4f4;
}

/* Dark Mode Variables */
.skin-theme-clientpref-night {
  --background-color-base: #0d1117;
  --background-color-interactive: #21262d;
  --background-color-interactive-subtle: #161b22;
  --color-base: #c9d1d9;
  --color-subtle: #8b949e;
  --color-progressive: #58a6ff;
  --color-visited: #bc8cff;
  --border-color-base: #30363d;
  --border-color-subtle: #21262d;
  
  --box-bg: #0d1117;
  --box-border: #30363d;
  --box-header-bg: #161b22;
  --code-bg: #161b22;
}

/* 3. Reset & Base */
* { box-sizing: border-box; }
body {
  margin: 0;
  background-color: var(--background-color-base);
  color: var(--color-base);
  font-family: var(--font-family-base); /* 폰트 적용 */
  font-size: 0.9rem;
  line-height: 1.6;
  word-break: keep-all; /* 한글 줄바꿈 최적화 */
}

a { text-decoration: none; color: var(--color-progressive); }
a:visited { color: var(--color-visited); }
a:hover { text-decoration: underline; }

ul { list-style: none; padding: 0; margin: 0; }

/* 4. Layout Grid */
.mw-page-container {
  display: flex; justify-content: center;
  background-color: var(--background-color-base);
}

.mw-page-container-inner {
  display: grid;
  grid-template-columns: var(--sidebar-width) minmax(0, 1fr) 12rem;
  column-gap: 36px;
  max-width: 1400px; width: 100%; padding: 24px;
}

/* 5. Header */
.vector-header-container {
  position: sticky; top: 0; z-index: 4;
  background-color: var(--background-color-base);
  border-bottom: none; height: 4.5rem;
  display: flex; justify-content: center;
  box-shadow: 0 1px 0 var(--border-color-subtle);
}

.vector-header {
  display: flex; justify-content: space-between; align-items: center;
  width: 100%; max-width: 1400px; padding: 0 24px;
  .vector-header-start, .vector-header-end { display: flex; align-items: center; gap: 10px; }
}

.mw-logo {
  display: flex; align-items: center; gap: 10px; text-decoration: none;
  .mw-logo-icon { width: 40px; height: 40px; background: url('/assets/images/logo.png') no-repeat center/contain; }
  .mw-logo-wordmark { font-size: 1.6em; font-weight: 700; color: var(--color-base); }
  .mw-logo-tagline { font-size: 0.85em; color: var(--color-subtle); display: block; margin-top: -2px; }
}

/* --- Search Box & Results Styling --- */

/* --- Search Box & Interaction --- */
.vector-search-box {
  /* [기능] 검색 결과창(absolute)의 기준점이 되도록 설정 */
  position: relative; 
  display: flex; 
  align-items: center;
  
  form { 
      display: flex; 
      width: 100%; /* 폼이 영역을 꽉 채우게 */
  }

  /* --- [User Design] Input Style --- */
  input { 
    border: 1px solid var(--border-color-base); 
    border-radius: 4px 0 0 4px;
    padding: 8px 12px; 
    font-size: 14px; 
    
    /* 너비 설정: flex로 부모에 맞추거나 고정폭 사용 */
    width: 250px; 
    
    font-family: var(--font-family-base);
    background-color: var(--background-color-base); 
    color: var(--color-base);
    outline: none;
    transition: border-color 0.2s;

    &:focus {
        border-color: var(--color-progressive); /* 포커스 시 파란 테두리 */
        /* 포커스 시 z-index를 높여서 버튼 경계선 위로 올라오게 함 */
        position: relative; 
        z-index: 2;
    }
  }

  /* --- [User Design] Button Style --- */
  button {
    background-color: var(--background-color-interactive);
    border: 1px solid var(--border-color-base); 
    border-left: none; /* input과 겹치는 선 제거 */
    padding: 8px 16px; 
    cursor: pointer; 
    border-radius: 0 4px 4px 0;
    color: var(--color-base); 
    font-size: 14px; 
    font-family: var(--font-family-base);
    font-weight: 600;
    transition: all 0.2s;

    &:hover {
        background-color: var(--border-color-subtle);
        color: var(--color-progressive);
    }

    &:active {
        background-color: var(--border-color-base);
        transform: translateY(1px);
    }
  }
}

/* --- Search Results Dropdown --- */
.search-results-container {
    display: none; /* 기본적으로 숨김 */
    
    /* [기능] 부모(.vector-search-box) 기준으로 위치 고정 */
    position: absolute;
    top: 100%;      /* 검색창 바로 아래 */
    left: 0;        /* 왼쪽 라인 맞춤 */
    
    /* [기능] 너비를 검색창 전체(input+button)와 동일하게 맞춤 */
    /* 만약 300px 고정을 원하시면 width: 300px; 로 변경하세요 */
    width: 100%;    
    
    max-height: 400px;
    overflow-y: auto;
    
    /* [User Design] Dropdown Style */
    background-color: var(--background-color-base);
    border: 1px solid var(--border-color-base);
    border-radius: 0 0 4px 4px; /* 위쪽은 직각, 아래쪽만 둥글게 */
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    z-index: 1000;
    margin-top: 4px; /* 검색창과 살짝 간격 */
}

/* --- Result Items Style --- */
.search-result-item {
    border-bottom: 1px solid var(--border-color-subtle);
    
    &:last-child { border-bottom: none; }

    a {
        display: block;
        padding: 12px;
        text-decoration: none;
        color: var(--color-base);
        transition: background-color 0.2s;

        &:hover {
            background-color: var(--background-color-interactive);
        }
    }
}

.result-title {
    font-weight: bold;
    font-size: 14px;
    color: var(--color-progressive);
    margin-bottom: 4px;
}

.result-date {
    font-size: 11px;
    color: var(--color-subtle);
    margin-bottom: 4px;
}

.result-snippet {
    font-size: 12px;
    color: var(--color-base);
    line-height: 1.4;
    opacity: 0.8;
}

.search-no-result {
    padding: 15px;
    text-align: center;
    color: var(--color-subtle);
    font-size: 13px;
}

/* 6. Sidebar */
.vector-main-menu-container {
  /* [핵심 기능] 스크롤 따라오기 (Sticky) */
  position: sticky;
  top: 5.5rem;   /* 상단 헤더(4.5rem) + 여유공간(1rem) 만큼 띄우고 고정 */
  
  /* [UX 개선] 메뉴가 화면보다 길 경우를 대비한 설정 */
  max-height: calc(100vh - 6rem); /* 화면 꽉 차면 잘리지 않게 높이 제한 */
  overflow-y: auto;               /* 내용이 넘치면 사이드바 내부에서 스크롤 됨 */
  z-index: 3;                     /* 본문보다 위에 보이도록 설정 */
  
  /* 기존 스타일 유지 */
  .vector-menu-heading { 
    font-weight: 700; color: var(--color-subtle); 
    margin: 24px 0 10px; font-size: 0.95em; 
    border-bottom: 1px solid var(--border-color-subtle); padding-bottom: 5px;
  }
  .mw-list-item { 
    margin-bottom: 6px; font-size: 1em; 
    a { 
      color: var(--color-base); padding: 4px 0; display: block; 
      &:hover { color: var(--color-progressive); } 
    }
    &.selected a { 
      font-weight: 700; color: var(--color-progressive); 
      border-left: 3px solid var(--color-progressive); 
      padding-left: 10px; margin-left: -13px; 
    }
  }

  /* (선택사항) 사이드바 내부 스크롤바 얇고 예쁘게 */
  &::-webkit-scrollbar { width: 4px; }
  &::-webkit-scrollbar-thumb { background-color: var(--border-color-subtle); border-radius: 4px; }
  &::-webkit-scrollbar-track { background: transparent; }
}

/* 7. Main Content */
.mw-body { min-width: 0; }

/* [수정됨] Tabs - Toolbar 숨김 처리 */
.vector-page-toolbar {
  display: none;
}

/* Title */
.firstHeading {
  font-size: 2em; font-weight: 700; border-bottom: 1px solid var(--border-color-base);
  margin-bottom: 0.5em; padding-bottom: 0.2em;
}
#siteSub { font-size: 0.9em; color: var(--color-subtle); margin-bottom: 2em; }

/* 8. Modernized Boxes */
.main-page-top-header {
  border: 1px solid var(--border-color-base);
  border-left: 5px solid var(--color-progressive);
  background-color: var(--box-header-bg);
  padding: 24px; margin-bottom: 30px; border-radius: 6px;
  display: flex; justify-content: space-between; align-items: flex-start;
  
  .welcome-inner h2 { margin: 0 0 10px; font-size: 1.5em; }
  .welcome-inner code { background: var(--code-bg); padding: 2px 6px; border-radius: 4px; font-size: 0.9em; font-family: var(--font-family-base); }
  .browse-links span { margin-left: 15px; font-weight: 700; }
}

.main-page-body-grid {
  display: grid; grid-template-columns: 1fr 1fr; gap: 30px;
}

/* Clean Box Style */
.clean-box {
  margin-bottom: 24px;
  h3 { 
    border-bottom: 2px solid var(--border-color-subtle); 
    font-size: 1.2em; margin-bottom: 10px; padding-bottom: 5px; 
  }
  .wiki-list li { margin-bottom: 5px; list-style: square; margin-left: 20px; }
}

/* Featured & Recent Cards */
.featured-card, .recent-card {
  border: 1px solid var(--box-border); border-radius: 6px; overflow: hidden; margin-bottom: 24px;
}

.card-header {
  background-color: var(--box-header-bg); padding: 10px 15px;
  font-weight: 700; border-bottom: 1px solid var(--box-border);
  display: flex; justify-content: space-between; align-items: center;
}
.card-tag { 
  background: var(--color-progressive); color: #fff; 
  font-size: 0.75em; padding: 2px 6px; border-radius: 4px; 
}

.card-body { padding: 15px; }
.code-block {
  background-color: var(--code-bg); border: 1px solid var(--border-color-subtle);
  padding: 12px; margin-top: 10px; border-radius: 4px; font-size: 0.9em; color: var(--color-subtle);
  font-family: var(--font-family-base);
}

.recent-list li {
  padding: 10px 15px; border-bottom: 1px solid var(--border-color-subtle);
  display: flex; gap: 10px; align-items: center; font-size: 0.9em;
  &:last-child { border-bottom: none; }
  .date { color: var(--color-subtle); font-size: 0.85em; }
  .diff { color: green; font-size: 0.85em; }
}

/* 9. Appearance */
.vector-appearance {
  .vector-pinnable-header-label { font-weight: 700; margin-bottom: 15px; font-size: 0.95em; }
  
  .theme-toggle-wrapper { display: flex; align-items: center; gap: 12px; font-size: 0.9em; font-weight: 500; color: var(--color-base); }
  .toggle-switch { position: relative; display: inline-block; width: 52px; height: 26px; input { opacity: 0; width: 0; height: 0; } .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: var(--border-color-base); transition: .4s; border-radius: 34px; border: 1px solid var(--border-color-base); } .slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.2); } }
  input:checked + .slider { background-color: var(--color-progressive); border-color: var(--color-progressive); }
  input:checked + .slider:before { transform: translateX(26px); }
}

/* --- Post Detail Styles --- */
.post-content {
  font-size: 1rem; line-height: 1.7; margin-top: 20px; font-family: var(--font-family-base);
  p { margin-bottom: 1.2em; }
  h2 { font-size: 1.5em; border-bottom: 1px solid var(--border-color-base); margin-top: 1.5em; margin-bottom: 0.8em; padding-bottom: 0.3em; font-family: var(--font-family-serif); }
  h3 { font-size: 1.2em; margin-top: 1.2em; margin-bottom: 0.5em; font-weight: bold; }
  ul, ol { margin-left: 2em; margin-bottom: 1em; } ul { list-style: disc; } ol { list-style: decimal; } li { margin-bottom: 0.3em; }
  blockquote { border-left: 4px solid var(--color-progressive); background-color: var(--background-color-interactive-subtle); padding: 10px 15px; margin: 1.5em 0; color: var(--color-subtle); font-style: italic; }
  pre { background-color: #2b2b2b; color: #a9b7c6; padding: 15px; border-radius: 4px; overflow-x: auto; font-family: var(--font-family-base); font-size: 0.9em; border: 1px solid var(--border-color-base); margin-bottom: 1.5em; }
  code { font-family: var(--font-family-base); background-color: var(--code-bg); padding: 2px 4px; border-radius: 3px; font-size: 0.9em; }
  img { max-width: 100%; height: auto; border: 1px solid var(--border-color-subtle); border-radius: 2px; margin: 1em 0; }
}

/* Infobox & Table Styles */
.infobox { float: right; clear: right; width: 300px; margin: 0 0 1em 1em; border: 1px solid var(--border-color-base); background-color: var(--box-bg); border-spacing: 0; padding: 0.2em; font-size: 0.9em; line-height: 1.5em; td, th { vertical-align: top; padding: 0.4em 0.6em; } .infobox-header { background-color: var(--box-header-bg); color: var(--color-base); text-align: center; font-size: 1.25em; font-weight: 700; padding: 0.5em; } .infobox-image { text-align: center; padding: 10px 0; } .infobox-image img { border-radius: 4px; border: 1px solid var(--border-color-subtle); } th[scope="row"] { text-align: left; font-weight: 700; width: 90px; } }
.tag-label { display: inline-block; background-color: var(--background-color-interactive); padding: 2px 6px; border-radius: 3px; font-size: 0.85em; margin-right: 4px; margin-bottom: 4px; border: 1px solid var(--border-color-subtle); }
.wikitable { background-color: var(--box-bg); border: 1px solid var(--border-color-base); border-collapse: collapse; margin: 1em 0; width: 100%; max-width: 100%; th, td { border: 1px solid var(--border-color-base); padding: 0.5em; } th { background-color: var(--box-header-bg); text-align: left; font-weight: 700; } }
.toc { display: table; padding: 10px 20px; margin: 20px 0; background-color: var(--background-color-interactive-subtle); border: 1px solid var(--border-color-base); border-radius: 2px; .toctitle { text-align: center; font-weight: 700; margin-bottom: 5px; } ul { list-style: none; padding: 0; margin: 0; } li { margin-bottom: 4px; font-size: 0.95em; } .tocnumber { color: var(--color-subtle); margin-right: 5px; } }
#catlinks { border: 1px solid var(--border-color-base); background-color: var(--box-bg); padding: 10px; margin-top: 40px; clear: both; .mw-normal-catlinks { display: flex; align-items: center; ul { display: inline; list-style: none; margin: 0; padding: 0; li { display: inline-block; border-left: 1px solid var(--color-subtle); padding: 0 0.5em; margin-left: 0.5em; &:first-child { border-left: none; margin-left: 0; } } } } }

/* Gallery Styles */
.gallery-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; margin-top: 20px; }
.gallery-item { background-color: var(--box-bg); border: 1px solid var(--border-color-base); padding: 10px; border-radius: 2px; transition: box-shadow 0.3s, transform 0.3s; &:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.1); transform: translateY(-3px); border-color: var(--color-progressive); } .thumb-link { display: block; overflow: hidden; background-color: var(--background-color-interactive-subtle); border: 1px solid var(--border-color-subtle); margin-bottom: 10px; } .thumb { height: 180px; display: flex; justify-content: center; align-items: center; overflow: hidden; img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s; } } &:hover .thumb img { transform: scale(1.08); } .gallery-info { text-align: center; .caption { font-size: 0.95em; margin-bottom: 8px; color: var(--color-base); b { display: block; margin-bottom: 4px; font-size: 1.05em; } p { margin: 0; font-size: 0.9em; color: var(--color-subtle); line-height: 1.4; } } .meta { font-size: 0.8em; color: var(--color-subtle); border-top: 1px solid var(--border-color-subtle); padding-top: 6px; display: flex; justify-content: space-between; } } }

/* Book List Styles */
.book-list { display: flex; flex-direction: column; gap: 20px; margin-top: 15px; }
.book-card { display: flex; gap: 20px; padding: 15px; border: 1px solid var(--border-color-base); background-color: var(--box-bg); border-radius: 4px; transition: transform 0.2s; &:hover { border-color: var(--color-progressive); transform: translateX(5px); } &.reading { border-left: 4px solid var(--color-progressive); background-color: var(--box-header-bg); } .book-cover { flex-shrink: 0; width: 100px; img { width: 100%; height: auto; border-radius: 2px; box-shadow: 2px 2px 5px rgba(0,0,0,0.1); border: 1px solid var(--border-color-subtle); } } .book-info { flex-grow: 1; display: flex; flex-direction: column; justify-content: center; h3 { margin: 0 0 5px 0; font-size: 1.2em; border: none; padding: 0; } .author { font-size: 0.9em; color: var(--color-subtle); margin-bottom: 10px; font-style: italic; } .quote-box { background-color: var(--code-bg); border: 1px solid var(--border-color-subtle); padding: 10px; border-radius: 4px; font-size: 0.9em; margin-bottom: 10px; .prompt { display: block; font-size: 0.8em; color: var(--color-subtle); margin-bottom: 3px; font-weight: 700; } p { margin: 0; font-style: italic; color: var(--color-base); } } .simple-summary { font-size: 0.95em; margin-bottom: 8px; } .meta-date { font-size: 0.8em; color: var(--color-subtle); margin-top: auto; } } }

/* Footer */
.mw-footer {
  margin-top: 60px; padding: 30px 0;
  border-top: 1px solid var(--border-color-base);
  font-size: 0.85em; color: var(--color-subtle);
}

/* Mobile Responsive */
@media (max-width: 1000px) {
  .mw-page-container-inner { grid-template-columns: 1fr; }
  .vector-column-start, .vector-column-end { display: none; }
  .main-page-body-grid { grid-template-columns: 1fr; }
  .main-page-top-header { flex-direction: column; text-align: center; .browse-links { text-align: center; margin-top: 10px; } }
  .infobox { float: none; width: 100%; margin: 0 0 20px 0; }
  .book-card { flex-direction: column; align-items: center; text-align: center; .book-cover { width: 120px; margin-bottom: 10px; } }
}

/* --- Main Hero Banner (Fixed Version) --- */
.main-hero-banner {
  width: 100%;
  height: 350px;
  margin-bottom: 30px;
  border-radius: 6px;
  border: 1px solid var(--border-color-subtle);
  
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;

  /* [1] 기본 상태 (라이트 모드) */
  background-color: #ffffff; 
  border-color: #e0e0e0;
  transition: background-color 0.3s ease;

  img.ascii-img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: contain;
    
    /* 라이트모드: 검은 배경 이미지를 하얗게 반전 */
    filter: invert(100%) hue-rotate(180deg);
    
    transition: filter 0.3s ease;
    image-rendering: -webkit-optimize-contrast;
    transform: translateZ(0);
  }

  /* [2] 다크 모드 감지 (강력한 수정) */
  /* html 태그 OR body 태그 어디에 클래스가 붙어도 작동하도록 모두 명시 */
  html.skin-theme-clientpref-night &,
  body.skin-theme-clientpref-night &,
  html.dark &,
  body.dark & {
    
    background-color: #000000 !important;
    border-color: var(--border-color-subtle) !important;

    img.ascii-img {
      /* 다크모드: 반전 끄기 (원본 검은 배경 이미지 노출) */
      filter: none !important;
    }
  }
}

/* ========================================================================== */
/* [Mobile Responsive] Header Redesign & Slide-Down Menu                    */
/* ========================================================================== */

/* 1. 햄버거 버튼 기본 스타일 (PC에서는 숨김) */
.mobile-menu-btn {
  display: none; /* 기본값: 숨김 */
  flex-direction: column;
  justify-content: space-around;
  width: 28px;  /* 버튼 크기 약간 축소 */
  height: 22px;
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 0;
  margin-left: 12px;
  z-index: 2000; 

  .bar {
    width: 100%;
    height: 2.5px; /* 두께 조정 */
    background-color: var(--color-base);
    border-radius: 2px;
    transition: all 0.3s ease;
  }

  /* 활성화(X자) 애니메이션 */
  &.active {
    .bar:nth-child(1) { transform: rotate(45deg) translate(5px, 5px); }
    .bar:nth-child(2) { opacity: 0; }
    .bar:nth-child(3) { transform: rotate(-45deg) translate(5px, -5px); }
  }
}

/* 2. 오버레이 (뒷배경 어둡게) */
.mobile-overlay {
  display: none;
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  z-index: 1005; 
  opacity: 0;
  transition: opacity 0.3s ease;
  &.visible { display: block; opacity: 1; }
}


/* -------------------------------------------------------------------------- */
/* [Mobile Breakpoint] 1000px 이하에서 디자인 변경                          */
/* -------------------------------------------------------------------------- */
@media (max-width: 1000px) {

  /* ---------------- [Layout Fixes] ---------------- */
  .mw-page-container-inner {
    display: block; /* Grid 해제 -> 1단 구성 */
    padding: 15px;
  }
  
  /* 사이드바, 오른쪽 컬럼 숨김 (메뉴 열릴 때만 보임) */
  .vector-column-end { display: none; }
  
  /* 메인 컨텐츠 1단 */
  .main-page-body-grid { grid-template-columns: 1fr; }


  /* ---------------- [Header Redesign] ---------------- */
  
  /* 1. 헤더 높이 줄이기 (4.5rem -> 3.5rem) */
  .vector-header-container {
    height: 3.5rem; 
    padding: 0 12px;
  }
  
  .vector-header {
    padding: 0; /* 내부 패딩 제거 */
    gap: 10px;
  }

  /* 2. 로고 크기 축소 */
  .mw-logo {
    gap: 8px;
    .mw-logo-icon { width: 32px; height: 32px; } /* 아이콘 축소 */
    .mw-logo-wordmark { font-size: 1.2em; }        /* 텍스트 축소 */
    .mw-logo-tagline { display: none; }            /* 태그라인 숨김 (공간 확보) */
  }

  /* 3. 검색창 크기 최적화 */
  .vector-search-box {
    input {
      /* 고정 너비 대신 화면 비율로 설정하거나 작게 줄임 */
      width: 140px !important; 
      padding: 6px 10px;
      font-size: 13px;
    }
    button {
      padding: 6px 12px;
      font-size: 13px;
    }
  }

  /* 4. 햄버거 버튼 강제 표시 (버그 해결 핵심) */
  .mobile-menu-btn {
    display: flex !important;
  }


  /* ---------------- [Slide-Down Menu Animation] ---------------- */
  
  .vector-column-start {
    display: block !important;
    
    /* 위치 및 크기 설정 */
    position: fixed;
    top: 3.5rem; /* 헤더 높이(3.5rem) 바로 아래에서 시작 */
    left: 0;
    width: 100%; /* 화면 전체 너비 */
    height: auto;
    max-height: 0; /* 처음엔 높이가 0 (숨김) */
    
    /* 디자인 */
    background-color: var(--background-color-base);
    border-bottom: 1px solid var(--border-color-base);
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    
    /* 애니메이션 설정 */
    overflow: hidden; /* 내용이 넘치면 숨김 */
    transition: max-height 0.4s cubic-bezier(0.25, 1, 0.5, 1); /* 부드러운 슬라이드 */
    z-index: 1010;
    padding: 0; /* 닫혀있을 땐 패딩 0 */

    /* 내부 스크롤 (메뉴가 너무 길 경우) */
    .vector-main-menu-container {
      position: static;
      max-height: 60vh; /* 화면 높이의 60%까지만 차지 */
      overflow-y: auto;
      padding: 20px; /* 메뉴 열렸을 때 내부 여백 */
    }

    /* ★ 메뉴 열림 상태 (.menu-open) */
    &.menu-open {
      max-height: 80vh; /* 높이가 늘어나면서 슬라이드 다운 효과 */
      border-bottom: 1px solid var(--border-color-base);
    }
  }

  /* 책 리스트 등 모바일 레이아웃 조정 */
  .book-card {
    flex-direction: column; 
    text-align: center;
    .book-cover { margin-bottom: 15px; }
  }
}
/* --- Clean Wiki Style Code Block (Final Fix) --- */

/* 1. 인라인 코드 (문장 중간에 `code` 이렇게 쓰는 것) */
p > code, li > code, td > code, span > code {
  background-color: rgba(175, 184, 193, 0.2);
  color: var(--color-base);
  padding: 0.2em 0.4em;
  border-radius: 4px;
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.85em;
  font-weight: 500;
}

/* 2. 코드 블럭 컨테이너 (최외곽 박스 하나만 스타일링) */
/* Jekyll(Rouge)은 보통 div.highlighter-rouge 안에 figure.highlight를 만듭니다. */
/* 중첩을 막기 위해 가장 바깥쪽 컨테이너만 디자인합니다. */
div.highlighter-rouge, 
div.language-plaintext,
div.language-c,
div.language-cpp,
div.language-python,
div.language-javascript {
  margin: 24px 0;
  border-radius: 6px;
  background-color: #f6f8fa; /* 라이트 모드 배경 */
  border: 1px solid #d0d7de; 
  box-shadow: none; 
}

/* 3. 내부 중첩 박스 스타일 초기화 (중요: 여기서 이중 박스를 없앱니다) */
div.highlighter-rouge figure.highlight,
div.highlighter-rouge pre.highlight {
  background: transparent !important; /* 배경 투명하게 */
  border: none !important;            /* 테두리 없애기 */
  margin: 0 !important;               /* 여백 없애기 */
  padding: 0 !important;              /* 패딩 없애기 */
  box-shadow: none !important;
}

/* 4. 실제 코드 영역 (Pre) 스타일링 */
/* 여기에만 패딩과 스크롤을 줍니다. */
pre {
  position: relative;
  margin: 0;
  padding: 16px; /* 코드와 박스 사이의 간격 */
  overflow-x: auto; /* 가로 스크롤 */
  font-family: 'JetBrains Mono', monospace;
  font-size: 13.5px;
  line-height: 1.6;
  
  /* 기본 글자색 (하이라이팅 안 된 부분) */
  color: #1f2328; 
  background-color: transparent; /* 투명 (부모 색 따름) */
}

/* 5. 코드 태그 초기화 */
code {
  font-family: 'JetBrains Mono', monospace;
  background-color: transparent;
  border: none;
  padding: 0;
  margin: 0;
  color: inherit;
}

/* 6. 스크롤바 커스텀 */
pre::-webkit-scrollbar { height: 6px; }
pre::-webkit-scrollbar-thumb {
  background-color: rgba(0,0,0, 0.2);
  border-radius: 3px;
}
pre::-webkit-scrollbar-track { background-color: transparent; }


/* ================================================================= */
/* [다크 모드 대응]                                                  */
/* ================================================================= */

:global(html.skin-theme-clientpref-night) div.highlighter-rouge,
:global(html.dark) div.highlighter-rouge,
:global(html.skin-theme-clientpref-night) div[class^="language-"],
:global(html.dark) div[class^="language-"] {
  background-color: #161b22; /* 짙은 배경 */
  border-color: #30363d;
}

:global(html.skin-theme-clientpref-night) pre,
:global(html.dark) pre {
  color: #e6edf3; /* 기본 글자색: 밝은 회색 */
}

/* 다크모드 스크롤바 */
:global(html.skin-theme-clientpref-night) pre::-webkit-scrollbar-thumb,
:global(html.dark) pre::-webkit-scrollbar-thumb {
  background-color: rgba(255,255,255, 0.2);
}

/* 다크모드 인라인 코드 */
:global(html.skin-theme-clientpref-night) p > code,
:global(html.dark) p > code {
  background-color: rgba(110, 118, 129, 0.4);
  color: #e6edf3;
}